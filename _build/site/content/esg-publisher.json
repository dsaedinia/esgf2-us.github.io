{"version":2,"kind":"Article","sha256":"5dc57f854aa3f690e7e8f695cd18384269dffe44e54f5d7a427d2f41872d5205","slug":"esg-publisher","location":"/ESG-Publisher.md","dependencies":[],"frontmatter":{"title":"ESG Publisher","github":"https://github.com/esgf2-us/esgf2-us.github.io","keywords":[],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/esgf2-us/esgf2-us.github.io/blob/new-Architecture/ESG-Publisher.md","exports":[{"format":"md","filename":"ESG-Publisher.md","url":"/ESG-Publisher-f86921e8fd1e0c294c47f127f3cbea38.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Publisher Introduction","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"rqJVF6qSff"}],"identifier":"publisher-introduction","label":"Publisher Introduction","html_id":"publisher-introduction","implicit":true,"key":"hlHuKGPUOF"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"HJ7IC3mYTP"},{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"esg-publisher","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"TXQix2raFg"}],"key":"MsCrLh9j1P"},{"type":"text","value":" or ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"sYEQQMf64N"},{"type":"inlineCode","value":"esgcet","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Ed536zPVaJ"},{"type":"text","value":" Python package contains a collection of command-line utilities to scan, manipulate and push dataset metadata to an ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"bYOhMG2TsM"},{"type":"emphasis","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"ESGF index node","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"XMfRnvA5ju"}],"key":"Zt9qZxzr4o"},{"type":"text","value":".  The basic publication process includes several basic steps and sometimes ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"g2iOzOkPzS"},{"type":"inlineCode","value":"optional","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"n3n3hYVuRV"},{"type":"text","value":" steps. Publisher functionality is available via several submodles/classes in the package.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"W6zV2AVzmg"}],"key":"aLjZAoOxRw"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"The publisher software has undergone a significant change starting with v5.* of the software.  Prior versions involved storage of dataset metadata in the legacy ESGF data node PostgreSQL database and generation of ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"CwhWJnrqOZ"},{"type":"inlineCode","value":"THREDDS","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"w4uA02MzRA"},{"type":"text","value":" catalogs.   The actual publication to the ESGF index occured via catalog harvesting.  Instead, the more recent publisher simplifies the process with the following phases:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"LsOMjAzSEm"}],"key":"poH3Iu3NI8"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"#. Local scan of datasets (featuring the ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"eii6m7ay1O"},{"type":"inlineCode","value":"autocurator","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"jsE0SJk7tS"},{"type":"text","value":" package by default)\n#. Record generation using scan, mapfile and auxiliary (json) information/files as input\n#. Update check of existing dataset, previous version manipulation.\n#. Push/publish of record(s) to ESGF index","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"M4xZqcVFon"}],"key":"MTZlpNsrwV"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"And several ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"hGRL1bG32o"},{"type":"inlineCode","value":"optional","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"ACOFdoMc7u"},{"type":"text","value":" project-specific phases:","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"TnL5nUkI9s"}],"key":"WblOPLkdlN"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Automatic metadata checking with PrePARE (CMIP6-only as of today)","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"HYog7IF6yx"}],"key":"bv11AtGQm8"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"PID registration and citiation URL generation (CMIP6 and input4MIPs)","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"mwGhc3lGi9"}],"key":"vaLRWmyGXV"}],"key":"nHb3rB0VGH"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"For those familiar with the previous publisher, please be aware of the following distinctions between earlier versions and v5.*","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"eLKXydWiO7"}],"key":"CwNkqpPthh"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":23,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"A Python3 conda environment is required (most prior versions have run Python2)","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"glsln0LtNO"}],"key":"B4YlpPPip7"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"the configuration (.ini) file format is new and have been vastly simplified.  Note that the old format for project-specific .ini files are still used by the esgf-prepare tools (eg. esgmapfile).  The v5. publisher has the ability to migrate the needed settings from the previous ini files.","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"bmGPVVGYcT"}],"key":"tCGJcCEXfx"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Prior invocation of esgpublish required use of ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"xHAAeDx0j6"},{"type":"inlineCode","value":"--thredds","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"xStmWGFzTE"},{"type":"text","value":" and ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"Ly4XgVkKUs"},{"type":"inlineCode","value":"--publish","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"QRpITfgz2C"},{"type":"text","value":" stages.  Those arguments are eliminated.  In the general case, you can run esgpublish in a single command.  Advanced users may chose to run the individual publishing steps separately to create workflows, for instance, in the use of an external workflow manager.","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"llxlLwsf4s"}],"key":"zcd6Fdwqlc"}],"key":"Gi45uTNocC"},{"type":"heading","depth":2,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"IEhX95fkAD"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"cI5ZQYV0So"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":30,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"inlineCode","value":"conda","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"bc7iB1MWxF"},{"type":"text","value":" eg. ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"fDa2WtG4dJ"},{"type":"inlineCode","value":"Miniconda <https://docs.conda.io/en/latest/miniconda.html>","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"nzHOqH0Zd0"},{"type":"text","value":"_  installation.","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"PBbcDeGwvk"}],"key":"B9KjXWlBrW"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Mountpoint to located data on the same host as publisher software installation, so the publisher scan utility (eg. ","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"TajIoyAxK2"},{"type":"inlineCode","value":"autocurator","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"C6wMRjpK69"},{"type":"text","value":") has access.","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"YI0ZKdCPsj"}],"key":"xStKzma0IW"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Basic dataset information provided via the esg mapfile format.   The most popular approach is using the ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"XQburx7eke"},{"type":"inlineCode","value":"esgf-prepare/esgmapfile <https://esgf.github.io/esgf-prepare/>","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"KkqNEKps4i"},{"type":"text","value":"_ utility.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"GgBKiUfTWc"}],"key":"xQFcZiJtUR"}],"key":"XHIH7mP1e8"},{"type":"heading","depth":2,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Helpful Links:","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"UiFtcJbIyI"}],"identifier":"helpful-links","label":"Helpful Links:","html_id":"helpful-links","implicit":true,"key":"IVshFyxjqo"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":36,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"inlineCode","value":"ESG Publisher Documentation","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"mbByKIXnmW"},{"type":"text","value":": ","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"wvGPBNNDkU"},{"type":"link","url":"https://esg-publisher.readthedocs.io/en/stable/intro.html","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"ESG Publisher Intro","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"VLaD86smWX"}],"urlSource":"https://esg-publisher.readthedocs.io/en/stable/intro.html","key":"oCV7hLYp5Y"}],"key":"xQknHiqM7b"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"inlineCode","value":"Github","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"bmZkOs9rMk"},{"type":"text","value":": ","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"uFjuVIbCLj"},{"type":"link","url":"https://github.com/esgf/esg-publisher","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"ESG Publisher Github","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"OU1NiFarSw"}],"urlSource":"https://github.com/esgf/esg-publisher","error":true,"key":"R0wAok5AYo"}],"key":"A9ljQb9GIq"}],"key":"w1bEIOxO3l"}],"key":"knwml12nHI"}],"key":"q8Y3K8Ouuw"},"references":{"cite":{"order":[],"data":{}}}}