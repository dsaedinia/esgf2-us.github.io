{"version":2,"kind":"Article","sha256":"5dc57f854aa3f690e7e8f695cd18384269dffe44e54f5d7a427d2f41872d5205","slug":"esg-publisher","location":"/ESG-Publisher.md","dependencies":[],"frontmatter":{"title":"ESG Publisher","github":"https://github.com/esgf2-us/esgf2-us.github.io","keywords":[],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/esgf2-us/esgf2-us.github.io/blob/new-Architecture/ESG-Publisher.md","exports":[{"format":"md","filename":"ESG-Publisher.md","url":"/ESG-Publisher-f86921e8fd1e0c294c47f127f3cbea38.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Publisher Introduction","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"NddC01RTlU"}],"identifier":"publisher-introduction","label":"Publisher Introduction","html_id":"publisher-introduction","implicit":true,"key":"SBe43ZLOCu"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"eVXgt0WbeS"},{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"esg-publisher","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Nic0zFLRJJ"}],"key":"t1MyHzwxzd"},{"type":"text","value":" or ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"HlxkfVf4f4"},{"type":"inlineCode","value":"esgcet","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"SH8bVbHycv"},{"type":"text","value":" Python package contains a collection of command-line utilities to scan, manipulate and push dataset metadata to an ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"BTYAIgXCGS"},{"type":"emphasis","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"ESGF index node","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"P1llBTwXf1"}],"key":"OevQLL8xry"},{"type":"text","value":".  The basic publication process includes several basic steps and sometimes ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"fwVgs1L5ew"},{"type":"inlineCode","value":"optional","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"XVlt0i5WnA"},{"type":"text","value":" steps. Publisher functionality is available via several submodles/classes in the package.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"P0Xfpi9raO"}],"key":"umF2PbdDDw"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"The publisher software has undergone a significant change starting with v5.* of the software.  Prior versions involved storage of dataset metadata in the legacy ESGF data node PostgreSQL database and generation of ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"t74XZKz0AS"},{"type":"inlineCode","value":"THREDDS","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"IbHu51vddg"},{"type":"text","value":" catalogs.   The actual publication to the ESGF index occured via catalog harvesting.  Instead, the more recent publisher simplifies the process with the following phases:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"dYs7LQOI0J"}],"key":"QwV3LvdR1A"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"#. Local scan of datasets (featuring the ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"KzO9Uuo653"},{"type":"inlineCode","value":"autocurator","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"H6nL6Y9VAm"},{"type":"text","value":" package by default)\n#. Record generation using scan, mapfile and auxiliary (json) information/files as input\n#. Update check of existing dataset, previous version manipulation.\n#. Push/publish of record(s) to ESGF index","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"FCUkyl8uW9"}],"key":"NuewI1Fz3j"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"And several ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"Xd7dswzqV6"},{"type":"inlineCode","value":"optional","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"sHdi605Jc6"},{"type":"text","value":" project-specific phases:","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"tZseS0xAUj"}],"key":"snGTtaKlFw"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Automatic metadata checking with PrePARE (CMIP6-only as of today)","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"Rg9mKOzCND"}],"key":"kCmmYOCObb"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"PID registration and citiation URL generation (CMIP6 and input4MIPs)","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"C8FUm1xTOi"}],"key":"EFp4XgpP9b"}],"key":"ymVSJTlrY2"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"For those familiar with the previous publisher, please be aware of the following distinctions between earlier versions and v5.*","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"PTqL2792hI"}],"key":"ZwFuO0qANd"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":23,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"A Python3 conda environment is required (most prior versions have run Python2)","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"mvhc9HZHRm"}],"key":"PYlAwP5Qlt"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"the configuration (.ini) file format is new and have been vastly simplified.  Note that the old format for project-specific .ini files are still used by the esgf-prepare tools (eg. esgmapfile).  The v5. publisher has the ability to migrate the needed settings from the previous ini files.","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"KRE8PkleDy"}],"key":"XDFdku5Qck"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Prior invocation of esgpublish required use of ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"NLkctHygFY"},{"type":"inlineCode","value":"--thredds","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"juuxMloUvc"},{"type":"text","value":" and ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"QxCleOwDNb"},{"type":"inlineCode","value":"--publish","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"rCGqgWyGRE"},{"type":"text","value":" stages.  Those arguments are eliminated.  In the general case, you can run esgpublish in a single command.  Advanced users may chose to run the individual publishing steps separately to create workflows, for instance, in the use of an external workflow manager.","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"w8oL3XRQuA"}],"key":"iZK0PBaOPB"}],"key":"dScJ6jmd5r"},{"type":"heading","depth":2,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"YeJXmLzZYl"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"QsdhBAId0M"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":30,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"inlineCode","value":"conda","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"Nn9nu26yT0"},{"type":"text","value":" eg. ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"C4f3mJ8mEE"},{"type":"inlineCode","value":"Miniconda <https://docs.conda.io/en/latest/miniconda.html>","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"M8Rh6PxYj7"},{"type":"text","value":"_  installation.","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"mnvlMp7tXx"}],"key":"NIYpghB5fE"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Mountpoint to located data on the same host as publisher software installation, so the publisher scan utility (eg. ","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"ZyUeXarP4c"},{"type":"inlineCode","value":"autocurator","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"K2RaMiKiUS"},{"type":"text","value":") has access.","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"NRkwwxFIOr"}],"key":"QhnDugQsyg"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Basic dataset information provided via the esg mapfile format.   The most popular approach is using the ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"HZwHrPNHAn"},{"type":"inlineCode","value":"esgf-prepare/esgmapfile <https://esgf.github.io/esgf-prepare/>","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"LAY4fE0BLL"},{"type":"text","value":"_ utility.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"bkrJKf9Yac"}],"key":"lrvoyuctSE"}],"key":"GLRwLCn883"},{"type":"heading","depth":2,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Helpful Links:","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"cVuty86DCd"}],"identifier":"helpful-links","label":"Helpful Links:","html_id":"helpful-links","implicit":true,"key":"zlMMH3UdUA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":36,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"inlineCode","value":"ESG Publisher Documentation","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"hcFeFyWmJ4"},{"type":"text","value":": ","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"IfprCeGlBO"},{"type":"link","url":"https://esg-publisher.readthedocs.io/en/stable/intro.html","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"ESG Publisher Intro","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"ZKr1aNni7y"}],"urlSource":"https://esg-publisher.readthedocs.io/en/stable/intro.html","key":"SIBKInJ5JG"}],"key":"R0M2oV4ktE"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"inlineCode","value":"Github","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"SJ5qe26cuk"},{"type":"text","value":": ","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"CR3cFjPS8n"},{"type":"link","url":"https://github.com/esgf/esg-publisher","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"ESG Publisher Github","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"Ifw7nWuZdJ"}],"urlSource":"https://github.com/esgf/esg-publisher","error":true,"key":"SRd9AjcXNe"}],"key":"XY2xxKnOwc"}],"key":"ZraCZFh1Yr"}],"key":"p9RUkq3lj6"}],"key":"nZW1AtKj1a"},"references":{"cite":{"order":[],"data":{}}}}