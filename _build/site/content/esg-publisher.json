{"version":2,"kind":"Article","sha256":"5dc57f854aa3f690e7e8f695cd18384269dffe44e54f5d7a427d2f41872d5205","slug":"esg-publisher","location":"/ESG-Publisher.md","dependencies":[],"frontmatter":{"title":"ESG Publisher","github":"https://github.com/esgf2-us/esgf2-us.github.io","keywords":[],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/esgf2-us/esgf2-us.github.io/blob/new-Architecture/ESG-Publisher.md","exports":[{"format":"md","filename":"ESG-Publisher.md","url":"/ESG-Publisher-f86921e8fd1e0c294c47f127f3cbea38.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Publisher Introduction","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"gVxEZDqnuX"}],"identifier":"publisher-introduction","label":"Publisher Introduction","html_id":"publisher-introduction","implicit":true,"key":"gqnGvXWs1t"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"xlmhe2jzDB"},{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"esg-publisher","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"bwit8gzV5B"}],"key":"HCMhThJwun"},{"type":"text","value":" or ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"KD79dEggsr"},{"type":"inlineCode","value":"esgcet","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"CSM32WQdUB"},{"type":"text","value":" Python package contains a collection of command-line utilities to scan, manipulate and push dataset metadata to an ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"AU7ZrkjdXg"},{"type":"emphasis","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"ESGF index node","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"oDkTHg5I4H"}],"key":"SwM4mApRDo"},{"type":"text","value":".  The basic publication process includes several basic steps and sometimes ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"TjstSHgRJ1"},{"type":"inlineCode","value":"optional","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ABAra1XqmM"},{"type":"text","value":" steps. Publisher functionality is available via several submodles/classes in the package.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"JVXVInh8c9"}],"key":"oUyyeXb7YL"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"The publisher software has undergone a significant change starting with v5.* of the software.  Prior versions involved storage of dataset metadata in the legacy ESGF data node PostgreSQL database and generation of ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"AxIsP9qGOQ"},{"type":"inlineCode","value":"THREDDS","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"XRhUmwM4Vq"},{"type":"text","value":" catalogs.   The actual publication to the ESGF index occured via catalog harvesting.  Instead, the more recent publisher simplifies the process with the following phases:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"PFvTdXJDb3"}],"key":"PSm5ummsXc"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"#. Local scan of datasets (featuring the ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"dSJeStK6AO"},{"type":"inlineCode","value":"autocurator","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"DUJoT2gsCl"},{"type":"text","value":" package by default)\n#. Record generation using scan, mapfile and auxiliary (json) information/files as input\n#. Update check of existing dataset, previous version manipulation.\n#. Push/publish of record(s) to ESGF index","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"Oj2iixNe0T"}],"key":"b3xpyOHx4Q"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"And several ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"GNc2pLHCSB"},{"type":"inlineCode","value":"optional","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"wd0LgjZ0bS"},{"type":"text","value":" project-specific phases:","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"BaU47bCrRz"}],"key":"GBCTZ4bT5Z"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Automatic metadata checking with PrePARE (CMIP6-only as of today)","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"gRewu1Tj3G"}],"key":"f1UWOhw8ZP"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"PID registration and citiation URL generation (CMIP6 and input4MIPs)","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"pelm8gkDLf"}],"key":"X1If3PksiQ"}],"key":"jKLyp47WvK"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"For those familiar with the previous publisher, please be aware of the following distinctions between earlier versions and v5.*","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"HSz4zjiaQW"}],"key":"SBAekox9PD"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":23,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"A Python3 conda environment is required (most prior versions have run Python2)","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"uarZ2OWwo5"}],"key":"F7s9hZcg4K"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"the configuration (.ini) file format is new and have been vastly simplified.  Note that the old format for project-specific .ini files are still used by the esgf-prepare tools (eg. esgmapfile).  The v5. publisher has the ability to migrate the needed settings from the previous ini files.","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"bNt9ycSMGr"}],"key":"EXTLjHS3hX"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Prior invocation of esgpublish required use of ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"NufMpkKIR8"},{"type":"inlineCode","value":"--thredds","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"Jx8IzQ1gPE"},{"type":"text","value":" and ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"X8aAhfld4z"},{"type":"inlineCode","value":"--publish","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"BnWjbLly3n"},{"type":"text","value":" stages.  Those arguments are eliminated.  In the general case, you can run esgpublish in a single command.  Advanced users may chose to run the individual publishing steps separately to create workflows, for instance, in the use of an external workflow manager.","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"Zm7gO3Lr0k"}],"key":"C3uG40ZkSA"}],"key":"pwm0WIAuYv"},{"type":"heading","depth":2,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"Qaw6tEqmxG"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"UTYkP83zXo"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":30,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"inlineCode","value":"conda","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"LX49IjrSST"},{"type":"text","value":" eg. ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"vIFxNvzuJx"},{"type":"inlineCode","value":"Miniconda <https://docs.conda.io/en/latest/miniconda.html>","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"DBdAsc6yk1"},{"type":"text","value":"_  installation.","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"R9ySuDj2QU"}],"key":"Pgz7vWAu8N"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Mountpoint to located data on the same host as publisher software installation, so the publisher scan utility (eg. ","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"rmHT5khclG"},{"type":"inlineCode","value":"autocurator","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"T6WtfIyj5R"},{"type":"text","value":") has access.","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"Wx6DI6zGxU"}],"key":"GPuyAvtn7l"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Basic dataset information provided via the esg mapfile format.   The most popular approach is using the ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"XFsXpE6q0v"},{"type":"inlineCode","value":"esgf-prepare/esgmapfile <https://esgf.github.io/esgf-prepare/>","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"lxRa5x0zxT"},{"type":"text","value":"_ utility.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"tWlN6MLjBV"}],"key":"ebhWMRWIdn"}],"key":"eqWdjgjixw"},{"type":"heading","depth":2,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Helpful Links:","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"vssXwLvDoD"}],"identifier":"helpful-links","label":"Helpful Links:","html_id":"helpful-links","implicit":true,"key":"sNqdtyaIN2"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":36,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"inlineCode","value":"ESG Publisher Documentation","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"q4UFdqB1Nw"},{"type":"text","value":": ","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"p4Me8a9DhD"},{"type":"link","url":"https://esg-publisher.readthedocs.io/en/stable/intro.html","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"ESG Publisher Intro","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"G7JeBA0SE7"}],"urlSource":"https://esg-publisher.readthedocs.io/en/stable/intro.html","key":"rJAoXCQdVm"}],"key":"wdHCMNdD0D"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"inlineCode","value":"Github","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"t34dkakzC0"},{"type":"text","value":": ","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"ziBmvYWwjD"},{"type":"link","url":"https://github.com/esgf/esg-publisher","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"ESG Publisher Github","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"BqVX8yXRPk"}],"urlSource":"https://github.com/esgf/esg-publisher","error":true,"key":"CcqN9m8hot"}],"key":"nxPa3mizso"}],"key":"kjQULrAwWk"}],"key":"NMKSbce6Qo"}],"key":"DZhBbORias"},"references":{"cite":{"order":[],"data":{}}}}