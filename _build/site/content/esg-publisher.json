{"version":2,"kind":"Article","sha256":"5dc57f854aa3f690e7e8f695cd18384269dffe44e54f5d7a427d2f41872d5205","slug":"esg-publisher","location":"/ESG-Publisher.md","dependencies":[],"frontmatter":{"title":"ESG Publisher","github":"https://github.com/esgf2-us/esgf2-us.github.io","keywords":[],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/esgf2-us/esgf2-us.github.io/blob/new-Architecture/ESG-Publisher.md","exports":[{"format":"md","filename":"ESG-Publisher.md","url":"/ESG-Publisher-f86921e8fd1e0c294c47f127f3cbea38.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Publisher Introduction","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"RkYdwoOmOk"}],"identifier":"publisher-introduction","label":"Publisher Introduction","html_id":"publisher-introduction","implicit":true,"key":"Js7jZd3TP7"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"x65B4lJGjb"},{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"esg-publisher","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"fBIPgxzoRu"}],"key":"RUoQAnvbYr"},{"type":"text","value":" or ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"aOdcLCOo9V"},{"type":"inlineCode","value":"esgcet","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Ii4vBjf6Im"},{"type":"text","value":" Python package contains a collection of command-line utilities to scan, manipulate and push dataset metadata to an ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"RGVXKHsRRl"},{"type":"emphasis","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"ESGF index node","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"jzmt9gH4kd"}],"key":"OqxgwkJuk8"},{"type":"text","value":".  The basic publication process includes several basic steps and sometimes ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"brmhCqP7tt"},{"type":"inlineCode","value":"optional","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"j2Tu32Audf"},{"type":"text","value":" steps. Publisher functionality is available via several submodles/classes in the package.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"CRWRwojjwE"}],"key":"aR0dvzhwTd"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"The publisher software has undergone a significant change starting with v5.* of the software.  Prior versions involved storage of dataset metadata in the legacy ESGF data node PostgreSQL database and generation of ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"m4pD23nstj"},{"type":"inlineCode","value":"THREDDS","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"SNrmsLnz6z"},{"type":"text","value":" catalogs.   The actual publication to the ESGF index occured via catalog harvesting.  Instead, the more recent publisher simplifies the process with the following phases:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"XB2TRoialT"}],"key":"L4SsKimYt3"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"#. Local scan of datasets (featuring the ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"B2oCoF0pLH"},{"type":"inlineCode","value":"autocurator","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"F0S0vDoqnp"},{"type":"text","value":" package by default)\n#. Record generation using scan, mapfile and auxiliary (json) information/files as input\n#. Update check of existing dataset, previous version manipulation.\n#. Push/publish of record(s) to ESGF index","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"k5ltzngs3O"}],"key":"yRG5robgT7"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"And several ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"Qyg8oYuBqu"},{"type":"inlineCode","value":"optional","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"vj2e9zGvh3"},{"type":"text","value":" project-specific phases:","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"tl0LDms5Au"}],"key":"NHgCBKQP2v"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Automatic metadata checking with PrePARE (CMIP6-only as of today)","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"CydusLkflz"}],"key":"gJcKjW9De9"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"PID registration and citiation URL generation (CMIP6 and input4MIPs)","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"XHEGHEeHDe"}],"key":"FvE9e2b6as"}],"key":"xgCskO9SCW"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"For those familiar with the previous publisher, please be aware of the following distinctions between earlier versions and v5.*","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"nu6Sy9YdRd"}],"key":"wLe0EryahN"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":23,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"A Python3 conda environment is required (most prior versions have run Python2)","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"B8VcI0O1Op"}],"key":"bA3WON80N4"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"the configuration (.ini) file format is new and have been vastly simplified.  Note that the old format for project-specific .ini files are still used by the esgf-prepare tools (eg. esgmapfile).  The v5. publisher has the ability to migrate the needed settings from the previous ini files.","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"uEbQz8gVN7"}],"key":"mViAEHVvYt"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Prior invocation of esgpublish required use of ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"UN5OTGyy6V"},{"type":"inlineCode","value":"--thredds","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"An4iirrMI9"},{"type":"text","value":" and ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"VD6qjYfmYv"},{"type":"inlineCode","value":"--publish","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"U248SI9o5w"},{"type":"text","value":" stages.  Those arguments are eliminated.  In the general case, you can run esgpublish in a single command.  Advanced users may chose to run the individual publishing steps separately to create workflows, for instance, in the use of an external workflow manager.","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"ldocmTvL5N"}],"key":"US0P464W5y"}],"key":"wyfisEQvQS"},{"type":"heading","depth":2,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"qslg7SSfBp"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"Yh2QcpehwL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":30,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"inlineCode","value":"conda","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"ZOYaviSR4w"},{"type":"text","value":" eg. ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"vUJTuV6Rmx"},{"type":"inlineCode","value":"Miniconda <https://docs.conda.io/en/latest/miniconda.html>","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"cDa9jNpCGK"},{"type":"text","value":"_  installation.","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"rz76aWdpWY"}],"key":"ahVFXvxqyg"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Mountpoint to located data on the same host as publisher software installation, so the publisher scan utility (eg. ","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"IZqYcNaNlo"},{"type":"inlineCode","value":"autocurator","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"zlSmYN9bTa"},{"type":"text","value":") has access.","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"snbRIwJFsU"}],"key":"AnCTo6Haap"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Basic dataset information provided via the esg mapfile format.   The most popular approach is using the ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"hIC33G4d9c"},{"type":"inlineCode","value":"esgf-prepare/esgmapfile <https://esgf.github.io/esgf-prepare/>","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"IuIx1OxJgf"},{"type":"text","value":"_ utility.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"flFeHri4kZ"}],"key":"JvXLfvNoEX"}],"key":"jHg3F7y0mW"},{"type":"heading","depth":2,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Helpful Links:","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"qT02JExzT4"}],"identifier":"helpful-links","label":"Helpful Links:","html_id":"helpful-links","implicit":true,"key":"tBGcvYRo72"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":36,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"inlineCode","value":"ESG Publisher Documentation","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"iDRqfawSbX"},{"type":"text","value":": ","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"Ypbmzw2FeC"},{"type":"link","url":"https://esg-publisher.readthedocs.io/en/stable/intro.html","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"ESG Publisher Intro","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"VONvEMHMly"}],"urlSource":"https://esg-publisher.readthedocs.io/en/stable/intro.html","key":"L8jtE1FVpq"}],"key":"q4cAhYEv0j"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"inlineCode","value":"Github","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"V8q0xkgdoZ"},{"type":"text","value":": ","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"P3k3Nz0aNr"},{"type":"link","url":"https://github.com/esgf/esg-publisher","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"ESG Publisher Github","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"rhpe3r4ZQT"}],"urlSource":"https://github.com/esgf/esg-publisher","error":true,"key":"X9ZzmKze7O"}],"key":"JdDfRZdF9d"}],"key":"TCafo87CKD"}],"key":"tGcbe9cZbK"}],"key":"V7fsoUr4mr"},"references":{"cite":{"order":[],"data":{}}}}