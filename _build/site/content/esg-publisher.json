{"version":2,"kind":"Article","sha256":"5dc57f854aa3f690e7e8f695cd18384269dffe44e54f5d7a427d2f41872d5205","slug":"esg-publisher","location":"/ESG-Publisher.md","dependencies":[],"frontmatter":{"title":"ESG Publisher","github":"https://github.com/esgf2-us/esgf2-us.github.io","keywords":[],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/esgf2-us/esgf2-us.github.io/blob/new-Architecture/ESG-Publisher.md","exports":[{"format":"md","filename":"ESG-Publisher.md","url":"/ESG-Publisher-f86921e8fd1e0c294c47f127f3cbea38.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Publisher Introduction","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"QajOLfSrh1"}],"identifier":"publisher-introduction","label":"Publisher Introduction","html_id":"publisher-introduction","implicit":true,"key":"h359VmSdG4"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"gtI41Hv7mS"},{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"esg-publisher","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"gdmG8XgHde"}],"key":"BkTt5L5gmq"},{"type":"text","value":" or ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"qZipmRiRHw"},{"type":"inlineCode","value":"esgcet","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"qCHEeWl1p6"},{"type":"text","value":" Python package contains a collection of command-line utilities to scan, manipulate and push dataset metadata to an ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ozmmN3vZAY"},{"type":"emphasis","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"ESGF index node","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"rwHwgJw87n"}],"key":"zwnUNY6rKE"},{"type":"text","value":".  The basic publication process includes several basic steps and sometimes ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"VsVwd7XUH7"},{"type":"inlineCode","value":"optional","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"BIefBudNK6"},{"type":"text","value":" steps. Publisher functionality is available via several submodles/classes in the package.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"sZC4c7Gqyd"}],"key":"fv8k5Kk7M9"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"The publisher software has undergone a significant change starting with v5.* of the software.  Prior versions involved storage of dataset metadata in the legacy ESGF data node PostgreSQL database and generation of ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"iFsXHGtFRT"},{"type":"inlineCode","value":"THREDDS","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"rhoNg5qGhm"},{"type":"text","value":" catalogs.   The actual publication to the ESGF index occured via catalog harvesting.  Instead, the more recent publisher simplifies the process with the following phases:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"xaTfL2Zfxh"}],"key":"Q8OXlPkqLk"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"#. Local scan of datasets (featuring the ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"cIJ5m6LofB"},{"type":"inlineCode","value":"autocurator","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"N9klTiRlx0"},{"type":"text","value":" package by default)\n#. Record generation using scan, mapfile and auxiliary (json) information/files as input\n#. Update check of existing dataset, previous version manipulation.\n#. Push/publish of record(s) to ESGF index","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"uVI1tNR6lt"}],"key":"TPcXdMZID7"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"And several ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"OWOm89WsGp"},{"type":"inlineCode","value":"optional","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"zUDfe6npGW"},{"type":"text","value":" project-specific phases:","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"rW6j4ZAFs9"}],"key":"LKv4im20XQ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Automatic metadata checking with PrePARE (CMIP6-only as of today)","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"ezYIb408Bn"}],"key":"qZgZACt1Fw"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"PID registration and citiation URL generation (CMIP6 and input4MIPs)","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"ZQoq35IbSv"}],"key":"TEIPsuOfmM"}],"key":"N9t63VtOW0"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"For those familiar with the previous publisher, please be aware of the following distinctions between earlier versions and v5.*","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"mmLDBEPQk8"}],"key":"K8UgXApZxj"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":23,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"A Python3 conda environment is required (most prior versions have run Python2)","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"QtR9BtOPl4"}],"key":"jr3q2xUjBP"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"the configuration (.ini) file format is new and have been vastly simplified.  Note that the old format for project-specific .ini files are still used by the esgf-prepare tools (eg. esgmapfile).  The v5. publisher has the ability to migrate the needed settings from the previous ini files.","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"J43bqHeRMQ"}],"key":"jlMMb7ZYnC"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Prior invocation of esgpublish required use of ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"kXSSBF2lZp"},{"type":"inlineCode","value":"--thredds","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"EeGA7pbjwT"},{"type":"text","value":" and ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"d02ZDqujRB"},{"type":"inlineCode","value":"--publish","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"isiF16wUJE"},{"type":"text","value":" stages.  Those arguments are eliminated.  In the general case, you can run esgpublish in a single command.  Advanced users may chose to run the individual publishing steps separately to create workflows, for instance, in the use of an external workflow manager.","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"HqKE4gQpsn"}],"key":"H8apMqWFIE"}],"key":"eSvjO4yOt9"},{"type":"heading","depth":2,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"ln4HkEQmPM"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"ke06LhR06j"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":30,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"inlineCode","value":"conda","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"LOxdq3bPx8"},{"type":"text","value":" eg. ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"LdcllYNaRB"},{"type":"inlineCode","value":"Miniconda <https://docs.conda.io/en/latest/miniconda.html>","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"enpWm3g9bJ"},{"type":"text","value":"_  installation.","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"w5fnozJjxg"}],"key":"gEDioeFD9F"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Mountpoint to located data on the same host as publisher software installation, so the publisher scan utility (eg. ","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"DoT5QUkMgE"},{"type":"inlineCode","value":"autocurator","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"iNrLy2e8z5"},{"type":"text","value":") has access.","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"f6jyyKpBnw"}],"key":"b4zVUIPFtw"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Basic dataset information provided via the esg mapfile format.   The most popular approach is using the ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"fnFd4Cmnnj"},{"type":"inlineCode","value":"esgf-prepare/esgmapfile <https://esgf.github.io/esgf-prepare/>","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"ZJIj00K379"},{"type":"text","value":"_ utility.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"iiMh5lMDFa"}],"key":"HgBIJwSvy5"}],"key":"pFE4KvxY5G"},{"type":"heading","depth":2,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Helpful Links:","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"yzP3FCssyI"}],"identifier":"helpful-links","label":"Helpful Links:","html_id":"helpful-links","implicit":true,"key":"IG5wZ5sgH8"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":36,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"inlineCode","value":"ESG Publisher Documentation","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"aE3tEpfGmR"},{"type":"text","value":": ","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"VgOe4bzAVN"},{"type":"link","url":"https://esg-publisher.readthedocs.io/en/stable/intro.html","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"ESG Publisher Intro","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"xqdBxhXuGQ"}],"urlSource":"https://esg-publisher.readthedocs.io/en/stable/intro.html","key":"IFlG2UHd8c"}],"key":"lwT2szuJcs"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"inlineCode","value":"Github","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"Gxj5VD9Grm"},{"type":"text","value":": ","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"duvSNtz4jv"},{"type":"link","url":"https://github.com/esgf/esg-publisher","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"ESG Publisher Github","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"YlIVagPaqZ"}],"urlSource":"https://github.com/esgf/esg-publisher","error":true,"key":"kUfviufYxo"}],"key":"WqyDDh1axc"}],"key":"mlder7wmfp"}],"key":"BXxGH232j8"}],"key":"AZTN3wTtT1"},"references":{"cite":{"order":[],"data":{}}}}